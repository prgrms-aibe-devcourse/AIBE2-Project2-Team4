<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head layout:fragment="head">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title th:text="'프로젝트 수정 - ' + ${project.title}">프로젝트 수정</title>

  <!-- Bootstrap CSS -->
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet"/>
  <!-- 프로젝트 전용 CSS -->
  <link th:href="@{/css/project/project.css}" rel="stylesheet"/>
</head>

<div layout:fragment="content" class="project-page">
  <div class="container py-5">
    <div class="card mx-auto" style="max-width:600px;">
      <div class="card-header bg-white">
        <h4 class="mb-0">프로젝트 수정</h4>
      </div>
      <div class="card-body">
        <form th:action="@{/projects/edit/{id}(id=${project.id})}" method="post">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

          <!-- 제목 -->
          <div class="mb-3">
            <label for="title" class="form-label">제목</label>
            <input
                    type="text"
                    id="title"
                    name="title"
                    class="form-control"
                    th:value="${project.title}"
                    placeholder="프로젝트 제목을 입력하세요"
                    required>
          </div>

          <!-- 설명 -->
          <div class="mb-3">
            <label for="description" class="form-label">설명</label>
            <textarea
                    id="description"
                    name="description"
                    class="form-control"
                    rows="4"
                    placeholder="프로젝트 설명을 입력하세요"
                    required
                    th:text="${project.description}"></textarea>
          </div>

          <!-- 모집 마감일 -->
          <div class="mb-3">
            <label for="deadline" class="form-label">모집 마감일</label>
            <input
                    type="datetime-local"
                    id="deadline"
                    name="deadline"
                    class="form-control"
                    th:value="${#temporals.format(project.deadline,'yyyy-MM-dd''T''HH:mm')}"
                    required/>
          </div>

          <!-- 예상 시작일 -->
          <div class="mb-3">
            <label for="startOption" class="form-label">예상 시작일</label>
            <select id="startOption" name="startOption" class="form-select" required>
              <option value="" disabled>선택하세요</option>
              <option
                      th:each="opt : ${startOptions}"
                      th:value="${opt}"
                      th:text="${opt.label}"
                      th:selected="${opt} == ${project.startOption}">
              </option>
            </select>
          </div>

          <!-- 진행 분류 -->
          <div class="mb-3">
            <label for="projectType" class="form-label">진행 분류</label>
            <select id="projectType" name="projectType" class="form-select" required>
              <option value="" disabled>선택하세요</option>
              <option
                      th:each="pt : ${projectTypes}"
                      th:value="${pt}"
                      th:text="${pt.label}"
                      th:selected="${pt} == ${project.projectType}">
              </option>
            </select>
          </div>

          <!-- 기획 상태 -->
          <div class="mb-3">
            <label for="planningState" class="form-label">기획 상태</label>
            <select id="planningState" name="planningState" class="form-select" required>
              <option value="" disabled>선택하세요</option>
              <option
                      th:each="ps : ${planningStates}"
                      th:value="${ps}"
                      th:text="${ps.label}"
                      th:selected="${ps} == ${project.planningState}">
              </option>
            </select>
          </div>

          <!-- 프로젝트 경험 -->
          <div class="mb-3">
            <label for="experience" class="form-label">프로젝트 경험</label>
            <select id="experience" name="experience" class="form-select" required>
              <option value="" disabled>선택하세요</option>
              <option
                      th:each="exp : ${experiences}"
                      th:value="${exp}"
                      th:text="${exp.label}"
                      th:selected="${exp} == ${project.experience}">
              </option>
            </select>
          </div>

          <!-- 협업 예정 인력 -->
          <div class="mb-3">
            <label for="collaborationOption" class="form-label">협업 예정 인력</label>
            <select id="collaborationOption" name="collaborationOption" class="form-select" required>
              <option value="" disabled>선택하세요</option>
              <option
                      th:each="co : ${collabs}"
                      th:value="${co}"
                      th:text="${co.label}"
                      th:selected="${co} == ${project.collaborationOption}">
              </option>
            </select>
          </div>

          <!-- 버튼 -->
          <div class="d-flex justify-content-between">
            <a th:href="@{/projects/{id}(id=${project.id})}" class="btn btn-outline-secondary">취소</a>
            <button type="submit" class="btn btn-primary">수정 저장</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- 프로젝트 전용 JS -->
<script th:src="@{/js/project/project.js}"></script>
</html>