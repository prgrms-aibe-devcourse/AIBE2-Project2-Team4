<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>멘토링 후기 상세보기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <link rel="stylesheet" href="/css/mentoringReview/mentoringReviewDetail.css">
</head>
<body>

<!-- 사이드바 -->
<div class="sidebar">
    <div class="menu">
        <a href="/mentoring">멘토링 신청</a>
        <a href="/mentoringReview" class="active">멘토링 후기</a>
        <a href="/study">스터디 만들기</a>
        <a href="/board">자유게시판</a>
    </div>
</div>

<div class="content">
    <div class="detail-container">
        <div class="mb-3">
            <button type="button" class="btn btn-outline-secondary" onclick="goBack()">← 목록으로 돌아가기</button>
        </div>

        <!-- 로딩 상태 -->
        <div id="loadingState" class="text-center py-5">
            <div class="spinner-border text-primary mb-3"></div>
            <div>후기를 불러오는 중...</div>
        </div>

        <!-- 에러 상태 -->
        <div id="errorState" class="text-center py-5 text-danger" style="display: none;">
            <div class="mb-3">오류 발생</div>
            <div id="errorMessage">후기를 불러올 수 없습니다.</div>
            <button class="btn btn-primary mt-3" onclick="loadReviewDetail()">다시 시도</button>
        </div>

        <!-- 후기 상세 -->
        <div id="reviewDetail" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-3" id="reviewTitle"></h4>
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <div>
                            <small class="text-muted">작성자: <span id="reviewerName"></span></small><br>
                            <small class="text-muted">멘토: <span id="mentorName"></span></small>
                        </div>
                        <div class="text-end">
                            <div class="star-rating" id="starRating"></div>
                            <small id="ratingText"></small>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="review-content" id="reviewContent"></div>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <small class="text-muted">
                                작성일: <span id="createdAt"></span> |
                                조회수: <span id="viewCount"></span>회
                            </small>
                        </div>
                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-outline-secondary" onclick="goBack()">목록</button>
                            <!-- 작성자만 노출 -->
                            <div id="ownerButtons" style="display: flex;">
                                <button type="button" class="btn btn-outline-success me-1" onclick="editReview()">수정</button>
                                <button type="button" class="btn btn-outline-danger" onclick="deleteReview()">삭제</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/mentorReview/mentoringReviewDetail.js}"></script>
</body>
</html>
