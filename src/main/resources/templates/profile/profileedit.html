<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>í”„ë¡œí•„ ìˆ˜ì •</title>
    <style>
        body { font-family: sans-serif; margin: 2rem; }
        label { display: block; margin-top: 1rem; font-weight: bold; }
        input, textarea { width: 100%; padding: 0.5rem; margin-top: 0.3rem; }
        button { margin-top: 1rem; padding: 0.4rem 0.8rem; }
        ul { list-style: none; padding: 0; }
        li { display: flex; align-items: center; gap: 0.5rem; margin: 0.5rem 0; }
    </style>
</head>
<body>
<h1>í”„ë¡œí•„ ìˆ˜ì •</h1>

<form th:action="@{/profile/edit}" method="post" id="profileForm">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <label>í¬ì§€ì…˜</label>
    <input type="text" name="position" th:value="${profile.position}" />

    <label>ì†Œê°œê¸€</label>
    <textarea name="bio" rows="5" th:text="${profile.bio}"></textarea>

    <label>ê¸°ìˆ  ìŠ¤íƒ</label>
    <ul id="skillList">
        <!-- ê¸°ì¡´ ìŠ¤í‚¬ì„ hidden input ê³¼ í•¨ê»˜ ë Œë”ë§ -->
        <li th:each="s : ${skills}">
            <span th:text="${s}"></span>
            <button type="button" onclick="removeSkill(this)">âŒ</button>
            <input type="hidden" name="skills" th:value="${s}" />
        </li>
    </ul>

    <input type="text" id="newSkillInput" placeholder="ìƒˆ ê¸°ìˆ  ì…ë ¥" />
    <button type="button" onclick="addSkill()">â• ì¶”ê°€</button>

    <br/><br/>
    <button type="submit">ğŸ’¾ ì €ì¥</button>
    <button type="button" onclick="location.href='/profile'">â† ëŒì•„ê°€ê¸°</button>
</form>

<script>
    function addSkill() {
        const input = document.getElementById('newSkillInput');
        const val = input.value.trim();
        if (!val) return;
        const ul = document.getElementById('skillList');
        const li = document.createElement('li');
        li.innerHTML = `
            <span>${val}</span>
            <button type="button" onclick="removeSkill(this)">âŒ</button>
            <input type="hidden" name="skills" value="${val}" />
        `;
        ul.appendChild(li);
        input.value = '';
        input.focus();
    }

    function removeSkill(btn) {
        btn.closest('li').remove();
    }
</script>
</body>
</html>